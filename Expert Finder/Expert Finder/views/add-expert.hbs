<link href="/public/addStyle.css" rel="stylesheet">

<h1>Add an Expert</h1>
<div>
<form name="add-expert" action="/add-expert" method="post">
    <fieldset>
        <label for="fname">First Name:</label>
        <input type="text" name="fname">
        <label for="fname">Last Name:</label>
        <input type="text" name="lname"><br>
        <label for="fname">About:</label>
        <input type="text" name="about"><br>
        <label for="fname">Email:</label>
        <input type="text" name="email"><br>
        <label for="git">Github link:</label>
        <input type="text" name="git"><br>
        <label for="linkedin">LinkedIn:</label>
        <input type="text" name="linkedin"><br>
        <label for="twitter">Twitter:</label>
        <input type="text" name="twitter"><br>
        <p>Add a skill:</p>
        <label for="category">Categories</label><br />
        <select id="add_category" name="category" onchange="showSkills()">
            {{#each category}}
            <option value='add_cat_{{id}}'>{{name}}</option>
            {{/each}}
        </select><br />
        <label>Skills:</label><br />
        <select id="add_skill" name="skill">
            {{#each skill}}
            <option value='add_skill_{{id}}'>{{name}}</option>
            {{/each}}
        </select>
        <select hidden id="add_industry" name="industry">
            {{#each industry}}
            <option value="add_industry_{{id}}">{{name}}</option>
            {{/each}}
        </select>
        <select hidden id="add_course" name="course">
            {{#each course}}
            <option value="add_course_{{id}}">{{name}}</option>
            {{/each}}
        </select>
        <br />
        <label>Experience</label><br />
        <input type="number" id="experience">

        <input type="button" value="Add Skill" onclick="addSkill()"><br /><br />
        <table hidden name="skills" id="skills_table" class="results-table">
            <thead>
                <tr>
                    <th hidden>CategoryID</th>
                    <th hidden>SkillID</th>
                    <th>Skill</th>
                    <th>Experience</th>
                </tr>
                <tbody>
                </tbody>
            </thead>
            <tbody id="body_skills">

            </tbody>
        </table>
        <input type="submit" value="Add User">
    </fieldset>
</form>
</div>
<script>
    function addSkill() {
        let table = document.getElementById("skills_table");
        var cat = document.getElementById("add_category").value;
        let row = table.insertRow(-1);
        let cell1 = row.insertCell(0);
        let cell2 = row.insertCell(1);
        let cell3 = row.insertCell(2);
        let cell4 = row.insertCell(3);

        cell1.appendChild(document.createTextNode(cat));
        if (cat == "add_cat_1") {
            var index = "add_skill";
        }
        else if (cat == "add_cat_2") {
            var index = "add_industry";
        }
        else if (cat == "add_cat_3") {
            var index = "add_course";
        }
        var skillID = document.getElementById(index).value;
        var skillValue = document.getElementById(index).selectedIndex;
        var skillName = document.getElementById(index).options[skillValue].text;
        cell2.appendChild(document.createTextNode(skillID));
        cell3.appendChild(document.createTextNode(skillName));
        let experience = document.getElementById("experience").value;
        cell4.appendChild(document.createTextNode(experience));

        cell1.hidden = true;
        cell2.hidden = true;
        table.hidden = false;
    }

    function showSkills() {
        var cat = document.getElementById("add_category").value;
        if (cat == "add_cat_1") {
            document.getElementById("add_skill").hidden = false;
            document.getElementById("add_industry").hidden = true;
            document.getElementById("add_course").hidden = true;
        }
        else if (cat == "add_cat_2") {
            document.getElementById("add_skill").hidden = true;
            document.getElementById("add_industry").hidden = false;
            document.getElementById("add_course").hidden = true;
        }
        else if (cat == "add_cat_3") {
            document.getElementById("add_skill").hidden = true;
            document.getElementById("add_industry").hidden = true;
            document.getElementById("add_course").hidden = false;
        }
    }
 


</script>